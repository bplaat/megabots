THREE.OrbitControls=function(e,t,n){this.object=e,this.domElement=void 0!==t?t:document,this.localElement=void 0!==n?n:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var a=this,i=new THREE.Vector2,s=new THREE.Vector2,c=new THREE.Vector2,r=new THREE.Vector2,h=new THREE.Vector2,l=new THREE.Vector2,d=new THREE.Vector2,u=new THREE.Vector2,E=new THREE.Vector2,m=0,p=0,f=1,b=new THREE.Vector3,T=new THREE.Vector3,y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},v=y.NONE,O={type:"change"};function g(){return 2*Math.PI/60/60*a.autoRotateSpeed}function o(){return Math.pow(.95,a.zoomSpeed)}function R(e){if(!1!==a.enabled){e.preventDefault();var t=a.domElement===document?a.domElement.body:a.domElement;if(v===y.ROTATE){if(!0===a.noRotate)return;s.set(e.clientX,e.clientY),c.subVectors(s,i),a.rotateLeft(2*Math.PI*c.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*c.y/t.clientHeight*a.rotateSpeed),i.copy(s)}else if(v===y.DOLLY){if(!0===a.noZoom)return;u.set(e.clientX,e.clientY),E.subVectors(u,d),0<E.y?a.dollyIn():a.dollyOut(),d.copy(u)}else if(v===y.PAN){if(!0===a.noPan)return;h.set(e.clientX,e.clientY),l.subVectors(h,r),a.pan(l),r.copy(h)}a.update()}}function H(){!1!==a.enabled&&(a.domElement.removeEventListener("mousemove",R,!1),a.domElement.removeEventListener("mouseup",H,!1),v=y.NONE)}function L(e){var t;!1!==a.enabled&&!0!==a.noZoom&&(t=0,e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),0<t?a.dollyOut():a.dollyIn())}this.rotateLeft=function(e){void 0===e&&(e=g()),p-=e},this.rotateUp=function(e){void 0===e&&(e=g()),m-=e},this.panLeft=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[0],n[1],n[2]),t.multiplyScalar(-e),b.add(t)},this.panUp=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),b.add(t)},this.pan=function(e){var t,n=a.domElement===document?a.domElement.body:a.domElement;void 0!==a.object.fov?(t=a.object.position.clone().sub(a.target).length(),t*=Math.tan(a.object.fov/2*Math.PI/180),a.panLeft(2*e.x*t/n.clientHeight),a.panUp(2*e.y*t/n.clientHeight)):void 0!==a.object.top?(a.panLeft(e.x*(a.object.right-a.object.left)/n.clientWidth),a.panUp(e.y*(a.object.top-a.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=o()),f/=e},this.dollyOut=function(e){void 0===e&&(e=o()),f*=e},this.update=function(){var e=this.object.position,t=e.clone().sub(this.target),n=Math.atan2(t.x,t.z),o=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y);this.autoRotate&&this.rotateLeft(g()),n+=p,o+=m,o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(1e-6,Math.min(Math.PI-1e-6,o));var a=t.length()*f,a=Math.max(this.minDistance,Math.min(this.maxDistance,a));this.target.add(b),t.x=a*Math.sin(o)*Math.sin(n),t.y=a*Math.cos(o),t.z=a*Math.sin(o)*Math.cos(n),e.copy(this.target).add(t),this.object.lookAt(this.target),m=p=0,f=1,b.set(0,0,0),0<T.distanceTo(this.object.position)&&(this.dispatchEvent(O),T.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.localElement.addEventListener("mousedown",function(e){if(!1!==a.enabled){if(e.preventDefault(),0===e.button){if(!0===a.noRotate)return;v=y.ROTATE,i.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===a.noZoom)return;v=y.DOLLY,d.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===a.noPan)return;v=y.PAN,r.set(e.clientX,e.clientY)}a.domElement.addEventListener("mousemove",R,!1),a.domElement.addEventListener("mouseup",H,!1)}},!1),this.domElement.addEventListener("mousewheel",L,!1),this.domElement.addEventListener("DOMMouseScroll",L,!1),this.domElement.addEventListener("keydown",function(e){if(!1!==a.enabled&&!0!==a.noKeys&&!0!==a.noPan){var t=!1;switch(e.keyCode){case a.keys.UP:a.pan(new THREE.Vector2(0,a.keyPanSpeed)),t=!0;break;case a.keys.BOTTOM:a.pan(new THREE.Vector2(0,-a.keyPanSpeed)),t=!0;break;case a.keys.LEFT:a.pan(new THREE.Vector2(a.keyPanSpeed,0)),t=!0;break;case a.keys.RIGHT:a.pan(new THREE.Vector2(-a.keyPanSpeed,0)),t=!0}t&&a.update()}},!1),this.localElement.addEventListener("touchstart",function(e){if(!1!==a.enabled)switch(e.touches.length){case 1:if(!0===a.noRotate)return;v=y.TOUCH_ROTATE,i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===a.noZoom)return;v=y.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+n*n);d.set(0,n);break;case 3:if(!0===a.noPan)return;v=y.TOUCH_PAN,r.set(e.touches[0].pageX,e.touches[0].pageY);break;default:v=y.NONE}},!1),this.domElement.addEventListener("touchend",function(){!1!==a.enabled&&(v=y.NONE)},!1),this.domElement.addEventListener("touchmove",function(e){if(!1!==a.enabled){e.preventDefault(),e.stopPropagation();var t=a.domElement===document?a.domElement.body:a.domElement;switch(e.touches.length){case 1:if(!0===a.noRotate)return;if(v!==y.TOUCH_ROTATE)return;s.set(e.touches[0].pageX,e.touches[0].pageY),c.subVectors(s,i),a.rotateLeft(2*Math.PI*c.x/t.clientWidth*a.rotateSpeed),a.rotateUp(2*Math.PI*c.y/t.clientHeight*a.rotateSpeed),i.copy(s);break;case 2:if(!0===a.noZoom)return;if(v!==y.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(n*n+o*o);u.set(0,o),E.subVectors(u,d),0<E.y?a.dollyOut():a.dollyIn(),d.copy(u);break;case 3:if(!0===a.noPan)return;if(v!==y.TOUCH_PAN)return;h.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(h,r),a.pan(l),r.copy(h);break;default:v=y.NONE}}},!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);
